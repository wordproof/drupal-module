services:
  plugin.manager.wordproof_stamper:
    class: Drupal\wordproof_timestamp\Plugin\StamperManager
    parent: default_plugin_manager

  plugin.manager.wordproof_blockchain_backend:
    class: Drupal\wordproof_timestamp\Plugin\BlockchainBackendManager
    parent: default_plugin_manager

  wordproof_timestamp.timestamp_builder_service:
    class: Drupal\wordproof_timestamp\TimestampBuilderService
    arguments: [ '@plugin.manager.wordproof_stamper', '@plugin.manager.wordproof_blockchain_backend', '@wordproof_timestamp.repository', '@config.factory', '@wordproof_timestamp.entity_watch_list' ]

  wordproof_timestamp.wordproof_api_client:
    class: Drupal\wordproof_timestamp\WordProofApiClient
    arguments: [ '@http_client', '@config.factory' ]

  wordproof_timestamp.repository:
    class: Drupal\wordproof_timestamp\TimestampRepository
    arguments: ['@entity_type.manager']
    tags:
      - { name: backend_overridable }

  wordproof_timestamp.entity_watch_list:
    class: Drupal\wordproof_timestamp\EntityWatchListService
    arguments: ['@entity_type.manager', '@entity_field.manager']
    tags:
      - { name: backend_overridable }
