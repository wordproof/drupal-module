services:
  plugin.manager.wordproof_stamper:
    class: Drupal\wordproof\Plugin\StamperManager
    parent: default_plugin_manager

  plugin.manager.wordproof_blockchain_backend:
    class: Drupal\wordproof\Plugin\BlockchainBackendManager
    parent: default_plugin_manager

  wordproof.timestamp_builder_service:
    class: Drupal\wordproof\TimestampBuilderService
    arguments: [ '@plugin.manager.wordproof_stamper', '@plugin.manager.wordproof_blockchain_backend', '@wordproof.repository', '@config.factory' ]

  wordproof.wordproof_api_client:
    class: Drupal\wordproof\WordproofAPIClient
    arguments:
      [ '@http_client', '@config.factory' ]

  wordproof.repository:
    class: Drupal\wordproof\TimestampRepository
    arguments: ['@database']
    tags:
      - { name: backend_overridable }
